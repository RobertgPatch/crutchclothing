<%@taglib prefix="sec" uri="http://www.springframework.org/security/tags"%>
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%>  
<html>
	<head>
		<title>Crutch Clothing - SF Based Appperal</title>
		

    <!-- MetisMenu CSS -->
    <link href="/resources/css/metisMenu.min.css" rel="stylesheet">

    <!-- Timeline CSS -->
    <link href="/resources/css/timeline.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="/resources/css/sb-admin-2.css" rel="stylesheet">

    <!-- Morris Charts CSS -->
    <link href="/resources/css/morris.css" rel="stylesheet">
    
		<link href="/resources/css/bootstrap.min.css" rel='stylesheet' type='text/css' />
		<link href="/resources/css/bootstrap.css" rel='stylesheet' type='text/css' />
		<link href="/resources/css/theme.css" rel='stylesheet' type='text/css' />
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>

		<!----webfonts---->
		<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800,300' rel='stylesheet' type='text/css'>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
		<!----//webfonts---->

		<script type="text/javascript" src="/resources/js/jquery.min.js"></script>
		<script type="text/javascript" src="/resources/js/bootstrap.js"></script>
		<script type="text/javascript" src="/resources/js/bootstrap.min.js"></script>
		<!--  jquery plguin -->
	<!--start slider -->
	    <link rel="stylesheet" href="/resources/css/fwslider.css" media="all">
		<script src="<c:url value="/resources/js/jquery-1.4.2.min.js" />"></script>
		<script src="<c:url value="/resources/js/css3-mediaqueries.js" />"></script>
		<script src="<c:url value="/resources/js/jquery-ui.min.js" />"></script>
		<script src="<c:url value="/resources/js/fwslider.js" />"></script>		
    	<script src="<c:url value="/resources/js/jquery-1.9.1.min.js" />"></script>

		<script src="<c:url value="/resources/" />"></script>
		
		<script src="<c:url value="/resources/js/jquery-migrate-1.0.0.min.js" />"></script>
		<script src="<c:url value="/resources/js/jquery-ui-1.10.0.custom.min.js" />"></script>
		<script src="<c:url value="/resources/js/jquery.ui.touch-punch.js" />"></script>
		<script src="<c:url value="/resources/js/modernizr.js" />"></script>
		<script src="<c:url value="/resources/js/bootstrap.min.js" />"></script>
		<script src="<c:url value="/resources/js/jquery.cookie.js" />"></script>
		<script src="<c:url value="/resources/js/fullcalendar.min.js" />"></script>
		<script src="<c:url value="/resources/js/jquery.dataTables.min.js" />"></script>
		<script src="<c:url value="/resources/js/excanvas.js" />"></script>
		<script src="<c:url value="/resources/js/jquery.flot.js" />"></script>
		<script src="<c:url value="/resources/js/jquery.flot.pie.js" />"></script>
		<script src="<c:url value="/resources/js/jquery.flot.stack.js" />"></script>
		<script src="<c:url value="/resources/js/jquery.flot.resize.min.js" />"></script>
		<script src="<c:url value="/resources/js/jquery.chosen.min.js" />"></script>
		<script src="<c:url value="/resources/js/jquery.uniform.min.js" />"></script>
		<script src="<c:url value="/resources/js/jquery.cleditor.min.js" />"></script>
		<script src="<c:url value="/resources/js/jquery.noty.js" />"></script>
		<script src="<c:url value="/resources/js/jquery.elfinder.min.js" />"></script>
		<script src="<c:url value="/resources/js/jquery.raty.min.js" />"></script>
		<script src="<c:url value="/resources/js/jquery.iphone.toggle.js" />"></script>
		<script src="<c:url value="/resources/js/jquery.uploadify-3.1.min.js" />"></script>
		<script src="<c:url value="/resources/js/jquery.gritter.min.js" />"></script>
		<script src="<c:url value="/resources/js/jquery.imagesloaded.js" />"></script>
		<script src="<c:url value="/resources/js/jquery.masonry.min.js" />"></script>
		<script src="<c:url value="/resources/js/jquery.knob.modified.js" />"></script>
		<script src="<c:url value="/resources/js/jquery.sparkline.min.js" />"></script>
		<script src="<c:url value="/resources/js/counter.js" />"></script>
		<script src="<c:url value="/resources/js/retina.js" />"></script>
		<script src="<c:url value="/resources/js/custom.js" />"></script>
		

    <!-- Metis Menu Plugin JavaScript -->
	<script src="<c:url value="/resources/js/metisMenu.min.js" />"></script>
    <!-- Morris Charts JavaScript -->
    <script src="<c:url value="/resources/js/raphael-min.js" />"></script>
    <script src="<c:url value="/resources/js/morris.min.js" />"></script>
	<script src="<c:url value="/resources/js/morris-data.js" />"></script>
    <!-- Custom Theme JavaScript -->
    <script src="<c:url value="/resources/js/sb-admin-2.js" />"></script>
		



    
    </script>
	<!--end slider -->
	
	

        <title>Applying jQuery DataTables plugin in the Java Server application</title>

<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
<link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/themes/smoothness/jquery-ui.css" />
 <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js"></script>

<link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.10.0/css/jquery.dataTables.css">
<script type="text/javascript" src="//code.jquery.com/jquery-1.10.2.min.js"></script>
<script type="text/javascript" src="//cdn.datatables.net/1.10.0/js/jquery.dataTables.js"></script>


<!-- 
<link rel="stylesheet" type="text/css" href="/resources/css/jquery.dataTables.css">
<script type="text/javascript"src="<c:url value="resources/js/jquery.dataTables.js"/>"></script>
<script type="text/javascript"src="<c:url value="resources/js/jquery.dataTables.min.js"/>"></script> 
<script type="text/javascript"src="<c:url value="resources/js/jquery.jeditable.js"/>"></script> 
 -->
        <script type="text/javascript">
       // $(document).ready(function() {
       // $('#users').dataTable({
          //  'bPaginate': true,
           // 'sAjaxSource': './UserDataServlet',
           // 'iDisplayLength': 5,
           // 'bSort' : false,
           // 'aoColumns' : [{'mData' : 'username'},
                           //{ 'mData': 'firstName' },
                           //{ 'mData': 'middleInit' },
                           //{ 'mData': 'lastName' },
                           //{ 'mData': 'phoneNumber' },
                          //{ 'mData': 'address1' },
                           //{ 'mData': 'city' },
                           //{ 'mData': 'state' },
                           //{ 'mData': 'email' }]

             //});
        
       // });
        $('#addUserModal').modal({
  show: true,
 }).css({
        'height': '900px',
        'margin-left': function () {
            return -($(this).width() / 2);
        }
    });
        
        
        </script>
        
        <script type="text/javascript">
       
        $(document).ready( function () {
            $('#userinfo').dataTable( {
                "bJQueryUI": true,
                "sPaginationType": "full_numbers",
                "bProcessing": true,
                "sAjaxSource": 'dtables/users.json',
                "aoColumnDefs": [
                                 { "bVisible": false,  "aTargets": [ 1 ] },
                                 {
                                   "fnRender": function ( oObj,sVal ) {
                                     return '<a href="usradm/fetch?' + sVal + '">edit</a>';
                                   },
                                   "bUseRendered": false,
                                   "aTargets": [ 3 ]
                                 }
                               ]        
            } );

        } );


        
        
        
        
        
        <script type="text/javascript">
        //$(document).ready(function() { 
            //$('.jqueryDataTable').dataTable( { 
              //  'bProcessing': false, 
                //'bServerSide': false, 
                //'sAjaxSource': './UserDataServlet', 
                //'bJQueryUI': true, 
                //'aoColumns': [ 
                  //  { 'mData': 'username' }, 
                    //{ 'mData': 'firstName' },
                    //{ 'mData': 'middleInit' },
                    //{ 'mData': 'lastName' },
                   // { 'mData': 'phoneNumber' },
                   // { 'mData': 'address1' },
                    //{ 'mData': 'city' },
                    //{ 'mData': 'state' },
                    //{ 'mData': 'email' }
                //] 
           // } );  
        //} ); 

        //$(document).ready(function () {
          //  $('users').dataTable({
            //    "bServerSide": true,
              //  "bProcessing": true,
                //"sAjaxSource" : "admin/users",
                //"sPaginationType": "full_numbers",
                //"bJQueryUI": true
           // });
        //});
        
        </script>
        
        <style>
        	.modal-body .form-horizontal .col-sm-2,
			.modal-body .form-horizontal .col-sm-10 {
			    width: 100%
			}
			
			.modal-body .form-horizontal .control-label {
			    text-align: left;
			}
			.modal-body .form-horizontal .col-sm-offset-2 {
			    margin-left: 15px;
			}
        </style>

        
    </head>
<body>

<c:url value="/j_spring_security_logout" var="logoutUrl" />
    	<form action="${logoutUrl}" method="post" id="logoutForm">
    		<input type="hidden" name="${_csrf.parameterName}"
    			value="${_csrf.token}" />
    	</form>
    	
    		<script>
    			function formSubmit() {
    				document.getElementById("logoutForm").submit();
    			}
        	</script>
	
<!----start-container----->
		<div class="header-bg">
			<div class="container">
			
			<c:if test="${name != 'Anonymoususer'}">
				<ul class="list-inline pull-right">
		 			<li><span class="text-right" style="color: gray">Welcome back : ${name} | </span><a href="javascript:formSubmit()"> Logout</a></li>
		 			<li><a href="${pageContext.request.contextPath}/account">Account</a></li>
		 		</ul>
			</c:if>

    		<c:if test="${name == 'Anonymoususer'}">
        		<ul class="list-inline pull-right">
		 			<li><a href="${pageContext.request.contextPath}/login">Login</a></li>
		 			<li><a href="${pageContext.request.contextPath}/registration">Register</a></li>
		 		</ul>
    			
			</c:if>
			 
				<div class="row">
					<div class="col-md-4">
						<div class="logo"><a href="${pageContext.request.contextPath}/welcome"><img src="/resources/images/crutch_logo_final.png" alt=""/></a></div>
					</div>
					<div class="col-md-8">		
								
	 					<nav class="navbar navbar-default" role="navigation">
						  <div class="container-fluid">
						    <!-- Brand and toggle get grouped for better mobile display -->
						    <div class="navbar-header"><span class="text-left"><a href="${pageContext.request.contextPath}/welcome">MENU</a></span>
						      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
						        <span class="sr-only">Toggle navigation</span>
						        <span class="icon-bar"></span>
						        <span class="icon-bar"></span>
						        <span class="icon-bar"></span>
						      </button>						   
						    </div>					
						    <!-- Collect the nav links, forms, and other content for toggling -->
						    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
						      <ul class="nav navbar-nav">
						      	 <li>
						         <div class="btn-group show-on-hover">
							          <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
							            Categories<span class="caret"></span>
							          </button>
							          <ul class="dropdown-menu" role="menu">
							            <li><a href="${pageContext.request.contextPath}/products">New arrivals</a></li>
							            <li><a href="${pageContext.request.contextPath}/products">Men</a></li>
							            <li><a href="#">More Coming Soon!!!</a></li>						            
							          </ul>
							        </div>						          
						        </li>
						        <li><a href="#">About</a></li>
						        <li><a href="${pageContext.request.contextPath}/contact">Contact</a></li>
						      </ul>							      					    					      
						    </div><!-- /.navbar-collapse -->
						  </div><!-- /.container-fluid -->
						</nav>
						<div class="right pull-right">
							<ul class="list-unstyled">
								<c:if test="${name != 'Anonymoususer'}">
									<c:if test="${cartQuan > 0 }" >
										<li class="a text-left"><a href="${pageContext.request.contextPath}/cart"><span class="glyphicon glyphicon-shopping-cart"></span></a>${cartQuan}</li>
									</c:if>
									<c:if test="${cartQuan == 0}" >
										<li class="a text-left"><a href="${pageContext.request.contextPath}/cart"><span class="glyphicon glyphicon-shopping-cart"></span></a></li>
									</c:if>
								</c:if>
								<c:if test="${name == 'Anonymoususer'}">
									<li class="a text-left"><a href="${pageContext.request.contextPath}/cart"><span class="glyphicon glyphicon-shopping-cart"></span></a></li>
								</c:if>
								<li><a href="${pageContext.request.contextPath}/checkout">Checkout</a></li>						
							</ul>							
						</div>	
					</div>

					<!----start-images-slider---->	
				  <!-- Single button -->
      
				</div>
			</div>
        </div>
        
	<c:url value="/logout" var="logoutUrl" />
	<form action="${logoutUrl}" method="post" id="logoutForm">
		<input type="hidden" name="${_csrf.parameterName}"
			value="${_csrf.token}" />
	</form>
	<script>
		function formSubmit() {
			document.getElementById("logoutForm").submit();
		}
	</script>

	
	
	<div class="container">
	<div class="panel panel-default">
	<div class="panel-heading">
		
		<h2><i class="fa fa-tachometer fa-2x"></i>  Admin Dashboard</h2>
	</div>
	
	
	
	<br>
	
	<div class="row" style="padding: 0px 15px 15px 15px">
                <div class="col-lg-3 col-md-6">
                    <div class="panel panel-primary">
                        <div class="panel-heading">
                            <div class="row">
                                <div class="col-xs-3">
                                    <i class="fa fa-users fa-5x"></i>
                                </div>
                                <div class="col-xs-9 text-right">
                                    <div class="huge">26</div>
                                    <div>New Users!</div>
                                </div>
                            </div>
                        </div>
                        <a href="#">
                            <div class="panel-footer">
                                <span class="pull-left">View Details</span>
                                <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                                <div class="clearfix"></div>
                            </div>
                        </a>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="panel panel-green">
                        <div class="panel-heading">
                            <div class="row">
                                <div class="col-xs-3">
                                    <i class="fa fa-tasks fa-5x"></i>
                                </div>
                                <div class="col-xs-9 text-right">
                                    <div class="huge">12</div>
                                    <div>New Tasks!</div>
                                </div>
                            </div>
                        </div>
                        <a href="#">
                            <div class="panel-footer">
                                <span class="pull-left">View Details</span>
                                <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                                <div class="clearfix"></div>
                            </div>
                        </a>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="panel panel-yellow">
                        <div class="panel-heading">
                            <div class="row">
                                <div class="col-xs-3">
                                    <i class="fa fa-shopping-cart fa-5x"></i>
                                </div>
                                <div class="col-xs-9 text-right">
                                    <div class="huge">124</div>
                                    <div>New Orders!</div>
                                </div>
                            </div>
                        </div>
                        <a href="#">
                            <div class="panel-footer">
                                <span class="pull-left">View Details</span>
                                <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                                <div class="clearfix"></div>
                            </div>
                        </a>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="panel panel-red">
                        <div class="panel-heading">
                            <div class="row">
                                <div class="col-xs-3">
                                    <i class="fa fa-support fa-5x"></i>
                                </div>
                                <div class="col-xs-9 text-right">
                                    <div class="huge">13</div>
                                    <div>Support Tickets!</div>
                                </div>
                            </div>
                        </div>
                        <a href="#">
                            <div class="panel-footer">
                                <span class="pull-left">View Details</span>
                                <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                                <div class="clearfix"></div>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
			
			<div class="row-fluid sortable panel panel-default" style="margin:10px">		
				<!-- <div class="box span12">
					<div class="box-header" data-original-title> -->
						<div class="panel-heading">
							<h2><i class="halflings-icon white user"></i><span class="break"></span>Members</h2>
						</div>
						
						<div style="padding:15px">
							<button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#addUserModal">Add User  <i class="fa fa-user-plus"></i></button>
							
						</div>
						
						<div id="addUserModal" class="modal fade" role="dialog">
						  <div class="modal-dialog">
						
						    <!-- Modal content-->
						    <div class="modal-content">
						      <div class="modal-header">
						        <button type="button" class="close" data-dismiss="modal">&times;</button>
						         <h4 class="modal-title">Add User</h4>
						      </div>
						      <div class="modal-body">	      	
						      	
						      			<form:form class="form-horizontal col-md-12 center-block" method="post" modelAttribute="addUser" action="admin/addUser">
				       	     	 
						       	     	 <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>
						       	     	 
                  						 <br>
                  						 <br>
                  						 
						       	     	 <div class="form-group">
										      <form:input path="username" type='text' name='username' class="form-control input-lg" placeholder="username" id="username"/>
										      <form:errors path="username" cssStyle="color: #ff0000;"/>				      
										  </div>
										  
										   <div class="form-group">
										      <form:input path="password" type='password' name='password' class="form-control input-lg" placeholder="password" id="password"/>
										      <form:errors path="password" cssStyle="color: #ff0000;"/>				      
										  </div>
							
										  <div class="form-group">
										      <form:input path="email" type='text' name='email' class="form-control input-lg" placeholder="email" id="email"/>
										      <form:errors path="email" cssStyle="color: #ff0000;"/>				      
										  </div>
										  
										  <input type="hidden" name="enabled" path="enabled" value="true"/>							 
						              
									 </form:form>
								
						      </div>
						      <div class="modal-footer">
						        <button type="button" class="btn btn-default pull-left">Add User</button>
						        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
						      </div>
						    </div>
						    </div>
						    </div>
    
						<div class="box-icon">
							<a href="#" class="btn-setting"><i class="halflings-icon white wrench"></i></a>
							<a href="#" class="btn-minimize"><i class="halflings-icon white chevron-up"></i></a>
							<a href="#" class="btn-close"><i class="halflings-icon white remove"></i></a>
						</div>
					
					
					<div class="box-content" style="padding:0px 15px 15px 15px">
						<table class="table table-striped table-bordered bootstrap-datatable datatable">
						  <thead>
							  <tr>
								  <th>Username</th>
								  <th>Date registered</th>
								  <th>Role</th>
								  <th>Status</th>
								  <th>Actions</th>
							  </tr>
						  </thead>   
						  <tbody>
						  <c:forEach var="member" items="${users}">
							<tr>
								<td class="center">${member.username}</td>
								<td class="center">${member.memberSince}</td>
								<td class="center">${member.topRole}</td>
								<td class="center">
									<span class="label label-success">Active</span>
								</td>
								<td class="center">
								
									<a href="${pageContext.request.contextPath}/admin/delete-user/${member.username}" >
										<span style="color:red" class="glyphicon glyphicon-trash"></span>
									</a>
									
									<a href="${pageContext.request.contextPath}/admin" >
										<span style="color:blue" class="glyphicon glyphicon-edit"></span>
									</a>
									
									
								</td>
							</tr>
							</c:forEach>
						  </tbody>
					  </table>            
					</div>
			</div>
			
			<div class="row-fluid sortable panel panel-default" style="margin:10px">		
				<!-- <div class="box span12">
					<div class="box-header" data-original-title> -->
						<div class="panel-heading">
							<h2><i class="halflings-icon white user"></i><span class="break"></span>Products</h2>
						</div>
						
						<div style="padding:15px">
							<button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#addProductModal">Add Product  <i class="fa fa-plus"></i></button>
						</div>
						
						<div id="addProductModal" class="modal fade" role="dialog">
						  <div class="modal-dialog">
						
						    <!-- Modal content-->
						    <div class="modal-content">
						      <div class="modal-header">
						        <button type="button" class="close" data-dismiss="modal">&times;</button>
						         <h4 class="modal-title">Add Product</h4>
						      </div>
						      <div class="modal-body">			 
			 					<p>some text..</p>
						      </div>
						      <div class="modal-footer">
						        <button type="button" class="btn btn-default pull-left">Add Product</button>
						        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
						      </div>
						    </div>
						    </div>
						    </div>
    
						<div class="box-icon">
							<a href="#" class="btn-setting"><i class="halflings-icon white wrench"></i></a>
							<a href="#" class="btn-minimize"><i class="halflings-icon white chevron-up"></i></a>
							<a href="#" class="btn-close"><i class="halflings-icon white remove"></i></a>
						</div>
					
					
					<div class="box-content" style="padding:0px 15px 15px 15px">
						<table class="table table-striped table-bordered bootstrap-datatable datatable">
						  <thead>
							  <tr>
								  <th>Product</th>
								  <th>Price</th>
								  <th>Size</th>
								  <th>Inventory</th>
								  <th>Colors</th>
								  <th>Actions</th>
							  </tr>
						  </thead>   
						  <tbody>
						  <c:forEach var="product" items="${products}">
							<tr>
								<td class="center">
									<div class="media">
									  <div class="media-left">
									    <a href="#">
									      <img class="media-object" src="/resources/images/crutch_black_back.jpg">
									    </a>
									  </div>
									  <div class="media-body">
									    <h4 class="media-heading">Media heading</h4>
									    ...
									  </div>
									</div>
								</td>
								<td class="center">${product.price}</td>
								<td class="center">
									<c:forEach var="det" items="${product.productDetail}">

										<div style="padding: 5px">${det.size}</div>

									</c:forEach>
								</td>
								<td class="center">
									<table>
	
									</table>
								</td>
								<td class="center">
									<span class="label label-success">Active</span>
								</td>
								<td class="center">
								
									<a href="${pageContext.request.contextPath}/admin/delete-user/${member.username}" >
										<span style="color:red" class="glyphicon glyphicon-trash"></span>
									</a>
									
									<a href="${pageContext.request.contextPath}/admin" >
										<span style="color:blue" class="glyphicon glyphicon-edit"></span>
									</a>
									
									
								</td>
							</tr>
							</c:forEach>
						  </tbody>
					  </table>            
					</div>
			</div>
			
			</div>
			</div>
	
		
</body>
 <!-- script references -->
    <div class="footer">
	<div class="container">
		 <div class="row">
		 	<div class="col-md-12">
		 		<ul class="list-inline pull-right">
		 			<li><a href="${pageContext.request.contextPath}/welcome">Home</a></li>
		 			<li><a href="${pageContext.request.contextPath}/products">Products</a></li>
		 			<li><a href="${pageContext.request.contextPath}/cart">Cart</a></li>
		 			<li><a href="${pageContext.request.contextPath}/account">Account</a></li>
		 			<li><a href="${pageContext.request.contextPath}/contact">Contact</a></li>
		 		</ul>
		 		<!-- 
		 		<form class="navbar-form pull-right" role="search">
			        <div class="form-group">
			        <input type="text" class="form-control" placeholder="Search">
			        </div>
			        <button type="Find" class="btn btn-default">Find</button>
			    </form>
			     -->
		 	</div>	
		 </div>	
		 <div class="copy-right text-center">
			<p>&#169Copyright 2014 All Rights Reserved  Crutch Clothing<a href="${pageContext.request.contextPath}/welcome">  crutchclothing.com</a></p>	
		</div>
	</div>
</div>
    
    
</html>
    